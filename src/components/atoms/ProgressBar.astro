---
import backgroundImage from '../../assets/Dot_05.png';
interface Props {
  color?: string;
  currentNumber: number;
  maxNumber: number;
  fullWidth?: string;
  backgroundType?: 'solid' | 'image';
  currentProgress?: string;
  children?: string | string[];
}

const {
  color,
  currentNumber,
  maxNumber,
  fullWidth,
  backgroundType = 'solid',
  currentProgress,
  children,
} = Astro.props;
const progress = Math.min((currentNumber / maxNumber || 0) * 100, 100);
---

<div class={`relative w-[${fullWidth || '100%'}] rounded-xs h-10 mx-auto progress-bar`}>
  {
    backgroundType === 'solid' ? (
      <div class="bg-gray-200 dark:bg-gray-200 w-full h-full rounded-xs" />
    ) : (
      <div
        class="w-full h-full rounded-xs"
        style={{
          backgroundImage: `url(${backgroundImage.src})`,
          backgroundRepeat: 'repeat',
          backgroundSize: '8px 8px',
          backgroundPosition: 'center',
          backgroundColor: 'transparent',
        }}
      />
    )
  }
  <!-- continer 2 children image and one being the below div and position it - relative inset 0-->
  <div
    class={`absolute inset-0 h-10 rounded-xs ${color || 'bg-watermarkGreen'}`}
    style={{ width: `${progress}%` }}
  >
    {children}
  </div>
  {
    currentProgress && (
      <span class="donation-card-funded-percent-header absolute right-0 top-0 p-3">
        {currentProgress}% FUNDED
      </span>
    )
  }
</div>
