---
import type { Campaign } from '../../../pages/campaigns/campaignBySlug.groq';
import { campaignBySlug } from '../../../pages/campaigns/campaignBySlug.groq';
import { sanityClient as sanity } from 'sanity:client';
import Hero from './_components/Hero.astro';
import Layout from '../../../layouts/Layout.astro';
import Video from '../../../components/Video.astro';
import Footer from '../../../components/Footer.astro';
import HoustonFAQ from './_components/HoustonFAQ.astro';
import { portableText } from '~/sanity';
import { DonationForm, getDonationProps } from '~/features/donate';
const campaign: Campaign = await sanity.fetch(campaignBySlug, { slug: 'houstons-first' });
---

<Layout>
  <div class="relative mx-auto lg:grid lg:grid-cols-[1fr_400px] lg:gap-8 lg:px-12">
    <main class="flex flex-col lg:gap-8 gap-0 p-8 lg:pl-24">
      <!-- Hero Image -->
      <div
        class="absolute top-0 left-0 w-full min-h-[800px] -z-10
        bg-cover bg-no-repeat bg-center
        lg:bg-center bg-right bg-gradient-to-b from-[#1a303a]
        to-[#1a303a]"
      >
      </div>
      <Hero campaignData={campaign} />

      <!-- Give form - between Hero and Video on mobile, sticky sidebar on desktop -->
      <aside class="w-full bg-white p-6 my-8 rounded-md shadow-lg lg:hidden">
        <DonationForm
          {...getDonationProps(campaign.donationForm)}
          telemetry={{
            app: 'seed.bible',
            sourceUrl: Astro.url.toString(),
            feature: campaign.sfCode,
          }}
          client:load
        />
      </aside>

      <Video
        src="https://player.vimeo.com/video/1063711566?badge=0&autopause=0&player_id=0&app_id=58479"
        poster="https://www.houstonsfirst.org/Themes/HoustonsFirstV1/Assets/Images/People/StaffWelcome.png?width=800&auto_optimize=high"
        class="w-full lg:max-w-4xl"
        rounded={true}
      />
      <!-- BG Gradient -->
      <div
        class="hidden lg:block absolute top-[800px] left-0 w-full min-h-[800px] -z-10
        bg-gradient-to-b from-[#ebebec] via-[#ebebec] to-white"
      >
      </div>
      <!-- Main Content -->
      {
        campaign.aboutSections &&
          campaign.aboutSections.map((section) => (
            <div class="py-8 lg:pb-24">
              <h2
                class="text-4xl md:text-left gotham-bold tracking-tight
      sm:text-5xl pb-8 lg:py-4"
              >
                {section.title}
              </h2>
              <div
                class="prose prose-lg max-w-none lg:max-w-3xl lg:mx-0 prose-p:text-lg prose-p:leading-[1.4] md:prose-p:text-xl md:prose-p:leading-7 prose-p:my-5 md:prose-p:my-6 prose-h2:text-3xl prose-h2:md:text-4xl 
    prose-h2:gotham-bold prose-h2:tracking-tight
    prose-h3:text-2xl prose-h3:leading-none prose-h3:my-0 gotham"
                set:html={portableText.toHTML(section.content)}
              />
            </div>
          ))
      }
    </main>

    <!-- Give form - desktop sticky sidebar -->
    <aside
      class="hidden lg:block w-full bg-white p-6 rounded-md shadow-lg lg:sticky lg:top-8 lg:h-fit lg:mx-0 lg:my-[60px]"
    >
      <DonationForm
        {...getDonationProps(campaign.donationForm)}
        telemetry={{
          app: 'seed.bible',
          sourceUrl: Astro.url.toString(),
          feature: campaign.sfCode,
        }}
        client:load
      />
    </aside>
  </div>

  <!-- FAQs -->
  <HoustonFAQ campaignData={campaign} />
  <section class="mb-[-140px] lg:mb-0">
    <Footer />
  </section>
</Layout>
